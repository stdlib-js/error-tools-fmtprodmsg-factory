{"version":3,"file":"index.mjs","sources":["../lib/main.js","../lib/defaults.js","../lib/validate.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2022 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport replace from '@stdlib/string-replace';\nimport validate from './validate.js';\nimport defaults from './defaults.js';\n\n\n// MAIN //\n\n/**\n* Returns a function which formats an error message for production.\n*\n* @param {Options} [options] - function options\n* @param {string} [options.url] - website URL for full error message\n* @param {string} [options.message] - error message template with `{{url}}` and `{{code}}` placeholders that will be replaced\n* @returns {Function} error formatting function\n*\n* @example\n* var opts = {\n*     'url': 'https://stdlib.io/error-decoder.html'\n* };\n*\n* var fcn = fmtprodmsgFactory( opts );\n* // returns <Function>\n*/\nfunction fmtprodmsgFactory( options ) {\n\tvar opts;\n\tvar err;\n\topts = defaults();\n\tif ( arguments.length > 0 ) {\n\t\terr = validate( opts, options );\n\t}\n\tif ( err ) {\n\t\tthrow err;\n\t}\n\treturn formatProdErrorMessage;\n\n\t/**\n\t* Formats an error message for production.\n\t*\n\t* @private\n\t* @param {string} code - error code\n\t* @param {*} ...args - error message arguments\n\t* @returns {string} formatted error message\n\t*/\n\tfunction formatProdErrorMessage() {\n\t\tvar code = arguments[ 0 ];\n\t\tvar url = opts.url + '?code='+code;\n\t\tvar msg;\n\t\tvar i;\n\t\tfor ( i = 1; i < arguments.length; i++ ) {\n\t\t\turl += '&arg[]=' + encodeURIComponent( arguments[ i ] );\n\t\t}\n\t\tmsg = replace( opts.message, '{{url}}', url );\n\t\tmsg = replace( msg, '{{code}}', code );\n\t\treturn msg;\n\t}\n}\n\n\n// EXPORTS //\n\nexport default fmtprodmsgFactory;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2023 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MAIN //\n\n/**\n* Returns default options.\n*\n* @private\n* @returns {Object} default options\n*/\nfunction defaults() {\n\treturn {\n\t\t'url': 'https://stdlib.io/docs/api/latest/error-decoder.html',\n\t\t'message': 'Minified stdlib error code: {{code}}. Visit {{url}} for the full message.'\n\t};\n}\n\n\n// EXPORTS //\n\nexport default defaults;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2022 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport isObject from '@stdlib/assert-is-plain-object';\nimport hasOwnProp from '@stdlib/assert-has-own-property';\nimport { isPrimitive as isString } from '@stdlib/assert-is-string';\nimport format from '@stdlib/error-tools-fmtprodmsg';\n\n\n// MAIN //\n\n/**\n* Validates function options.\n*\n* @private\n* @param {Object} opts - destination object\n* @param {Options} options - options to validate\n* @param {string} [options.url] - website URL for full error message\n* @param {string} [options.message] - error message template with `{{url}}` and `{{code}}` placeholders that will be replaced\n* @returns {(Error|null)} error object or null\n*/\nfunction validate( opts, options ) {\n\tif ( !isObject( options ) ) {\n\t\treturn new TypeError( format( '0Np2V', options ) );\n\t}\n\tif ( hasOwnProp( options, 'url' ) ) {\n\t\topts.url = options.url;\n\t\tif ( !isString( opts.url ) ) {\n\t\t\treturn new TypeError( format( '0Np2W', 'url', opts.url ) );\n\t\t}\n\t}\n\tif ( hasOwnProp( options, 'message' ) ) {\n\t\topts.message = options.message;\n\t\tif ( !isString( opts.message ) ) {\n\t\t\treturn new TypeError( format( '0Np2W', 'message', opts.message ) );\n\t\t}\n\t}\n\treturn null;\n}\n\n\n// EXPORTS //\n\nexport default validate;\n"],"names":["fmtprodmsgFactory","options","opts","err","url","message","arguments","length","isObject","hasOwnProp","isString","TypeError","format","validate","msg","i","code","encodeURIComponent","replace"],"mappings":";;ueA6CA,SAASA,EAAmBC,GAC3B,IAAIC,EACAC,EAKJ,GAJAD,ECnBO,CACNE,IAAO,uDACPC,QAAW,6EDkBPC,UAAUC,OAAS,IACvBJ,EEVF,SAAmBD,EAAMD,GACxB,OAAMO,EAAUP,GAGXQ,EAAYR,EAAS,SACzBC,EAAKE,IAAMH,EAAQG,KACbM,EAAUR,EAAKE,MACb,IAAIO,UAAWC,EAAQ,QAAS,MAAOV,EAAKE,MAGhDK,EAAYR,EAAS,aACzBC,EAAKG,QAAUJ,EAAQI,SACjBK,EAAUR,EAAKG,UACb,IAAIM,UAAWC,EAAQ,QAAS,UAAWV,EAAKG,UAGlD,KAdC,IAAIM,UAAWC,EAAQ,QAASX,GAezC,CFPQY,CAAUX,EAAMD,IAElBE,EACJ,MAAMA,EAEP,OAUA,WACC,IAEIW,EACAC,EAHAC,EAAOV,UAAW,GAClBF,EAAMF,EAAKE,IAAM,SAASY,EAG9B,IAAMD,EAAI,EAAGA,EAAIT,UAAUC,OAAQQ,IAClCX,GAAO,UAAYa,mBAAoBX,UAAWS,IAInD,OAFAD,EAAMI,EAAShB,EAAKG,QAAS,UAAWD,GACxCU,EAAMI,EAASJ,EAAK,WAAYE,EAEhC,CACF"}